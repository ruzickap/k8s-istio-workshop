<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Install Rook | Istio Workshop</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/k8s-istio-workshop/favicon.ico">
    <meta name="description" content="Istio workshop running on OpenStack">
    
    <link rel="preload" href="/k8s-istio-workshop/assets/css/0.styles.0b0f330d.css" as="style"><link rel="preload" href="/k8s-istio-workshop/assets/js/app.aadafe26.js" as="script"><link rel="preload" href="/k8s-istio-workshop/assets/js/2.a8265927.js" as="script"><link rel="preload" href="/k8s-istio-workshop/assets/js/1.3a70545e.js" as="script"><link rel="preload" href="/k8s-istio-workshop/assets/js/30.0eb57089.js" as="script"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/10.bd1d19b3.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/11.7efd562e.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/12.79f7589e.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/13.5b42aed2.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/14.7ad01137.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/15.80434ec3.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/16.d9227f7e.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/17.40b8b7c6.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/18.4234d16a.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/19.37c72c39.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/20.0ebf2e6b.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/21.6a41ea33.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/22.04ccdfbd.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/23.1386b505.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/24.3df70004.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/25.d400635d.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/26.a13820f0.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/27.90486a95.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/28.69da74d8.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/29.d35c18f8.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/3.33543ee3.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/31.4825d30c.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/32.6fdb390b.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/33.92de5503.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/34.6d8df76e.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/4.01dc66c0.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/5.16b2e612.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/6.f0a224ac.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/7.fdd4ffc3.js"><link rel="prefetch" href="/k8s-istio-workshop/assets/js/vendors~docsearch.c20bc4a1.js">
    <link rel="stylesheet" href="/k8s-istio-workshop/assets/css/0.styles.0b0f330d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/k8s-istio-workshop/" class="home-link router-link-active"><img src="/k8s-istio-workshop/istio.svg" alt="Istio Workshop" class="logo"> <span class="site-name can-hide">Istio Workshop</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/k8s-istio-workshop/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Istio links" class="dropdown-title"><span class="title">Istio links</span> <span class="arrow down"></span></button> <button type="button" aria-label="Istio links" class="mobile-dropdown-title"><span class="title">Istio links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://istio.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://istio.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ruzickap/k8s-istio-workshop" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio workshop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ruzickap/k8s-istio-demo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/ruzickap/k8s-istio-workshop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/k8s-istio-workshop/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Istio links" class="dropdown-title"><span class="title">Istio links</span> <span class="arrow down"></span></button> <button type="button" aria-label="Istio links" class="mobile-dropdown-title"><span class="title">Istio links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://istio.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://istio.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ruzickap/k8s-istio-workshop" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio workshop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ruzickap/k8s-istio-demo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/ruzickap/k8s-istio-workshop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/k8s-istio-workshop/" aria-current="page" class="sidebar-link">Istio workshop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/#requirements" class="sidebar-link">Requirements</a></li><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/#objectives" class="sidebar-link">Objectives</a></li><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/#workshop" class="sidebar-link">Workshop</a></li><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/#list-of-guis-used-in-workshop" class="sidebar-link">List of GUIs used in Workshop</a></li><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/#links" class="sidebar-link">Links</a></li></ul></li><li><a href="/k8s-istio-workshop/lab-01/" class="sidebar-link">Create VMs in OpenStack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/lab-01/#prepare-the-local-working-environment-inside-docker" class="sidebar-link">Prepare the local working environment inside Docker</a></li><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/lab-01/#provision-vms-in-openstack" class="sidebar-link">Provision VMs in OpenStack</a></li></ul></li><li><a href="/k8s-istio-workshop/lab-02/" class="sidebar-link">Install Kubernetes to the VMs</a></li><li><a href="/k8s-istio-workshop/lab-03/" class="sidebar-link">Install Helm</a></li><li><a href="/k8s-istio-workshop/lab-04/" aria-current="page" class="active sidebar-link">Install Rook</a></li><li><a href="/k8s-istio-workshop/lab-05/" class="sidebar-link">Install ElasticSearch and Kibana</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/lab-05/#install-fluentbit" class="sidebar-link">Install FluentBit</a></li></ul></li><li><a href="/k8s-istio-workshop/lab-06/" class="sidebar-link">Istio - Installation</a></li><li><a href="/k8s-istio-workshop/lab-07/" class="sidebar-link">Istio - Bookinfo Application</a></li><li><a href="/k8s-istio-workshop/lab-08/" class="sidebar-link">Istio - Configuring Request Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/lab-08/#apply-a-virtual-service" class="sidebar-link">Apply a virtual service</a></li><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/lab-08/#route-based-on-user-identity" class="sidebar-link">Route based on user identity</a></li></ul></li><li><a href="/k8s-istio-workshop/lab-09/" class="sidebar-link">Istio - Injecting an HTTP delay fault</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/k8s-istio-workshop/lab-09/#injecting-an-http-abort-fault" class="sidebar-link">Injecting an HTTP abort fault</a></li></ul></li><li><a href="/k8s-istio-workshop/lab-10/" class="sidebar-link">Istio - Weight-based routing</a></li><li><a href="/k8s-istio-workshop/lab-11/" class="sidebar-link">Istio - Mirroring</a></li><li><a href="/k8s-istio-workshop/lab-12/" class="sidebar-link">Istio - Cleanup</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="install-rook"><a href="#install-rook" class="header-anchor">#</a> Install Rook</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Screencast: <a href="https://asciinema.org/a/229605?autoplay=0&amp;t=155" target="_blank" rel="noopener noreferrer">https://asciinema.org/a/229605?t=155<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <p>Install <a href="https://rook.io/" target="_blank" rel="noopener noreferrer">Rook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Operator
(<a href="https://ceph.io/en/" target="_blank" rel="noopener noreferrer">Ceph<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> storage for k8s):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm repo <span class="token function">add</span> rook-stable https://charts.rook.io/stable
helm <span class="token function">install</span> <span class="token parameter variable">--wait</span> <span class="token parameter variable">--name</span> rook-ceph <span class="token parameter variable">--namespace</span> rook-ceph-system rook-stable/rook-ceph
<span class="token function">sleep</span> <span class="token number">40</span>
</code></pre></div><p>See how the <code>rook-ceph-system</code> should look like:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl get svc,deploy,po <span class="token parameter variable">--namespace</span><span class="token operator">=</span>rook-ceph-system <span class="token parameter variable">-o</span> wide
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS           IMAGES             SELECTOR
deployment.extensions/rook-ceph-operator   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           3m36s   rook-ceph-operator   rook/ceph:v0.9.2   <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-operator

NAME                                      READY   STATUS    RESTARTS   AGE     IP               NODE                             NOMINATED NODE   READINESS GATES
pod/rook-ceph-agent-2bxhq                 <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m14s   <span class="token number">192.168</span>.250.12   pruzicka-k8s-istio-workshop-node02   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-agent-8h4p4                 <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m14s   <span class="token number">192.168</span>.250.11   pruzicka-k8s-istio-workshop-node01   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-agent-mq69r                 <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m14s   <span class="token number">192.168</span>.250.13   pruzicka-k8s-istio-workshop-node03   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-operator-7478c899b5-px2hc   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m37s   <span class="token number">10.244</span>.2.3       pruzicka-k8s-istio-workshop-node02   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-discover-8ffj8                   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m14s   <span class="token number">10.244</span>.2.4       pruzicka-k8s-istio-workshop-node02   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-discover-l56jj                   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m14s   <span class="token number">10.244</span>.1.2       pruzicka-k8s-istio-workshop-node03   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-discover-q9xwp                   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m14s   <span class="token number">10.244</span>.0.4       pruzicka-k8s-istio-workshop-node01   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre></div><p>Create your Rook cluster:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/cluster.yaml
</code></pre></div><p>Get the <a href="https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/toolbox.yaml" target="_blank" rel="noopener noreferrer">Toolbox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
with Ceph commands:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/toolbox.yaml
<span class="token function">sleep</span> <span class="token number">240</span>
</code></pre></div><p>Check what was created in <code>rook-ceph</code> namespace:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl get svc,deploy,po <span class="token parameter variable">--namespace</span><span class="token operator">=</span>rook-ceph <span class="token parameter variable">-o</span> wide
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>NAME                              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>    AGE     SELECTOR
service/rook-ceph-mgr             ClusterIP   <span class="token number">10.103</span>.36.128   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">9283</span>/TCP   8m45s   <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mgr,rook_cluster<span class="token operator">=</span>rook-ceph
service/rook-ceph-mgr-dashboard   ClusterIP   <span class="token number">10.99</span>.173.58    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8443</span>/TCP   8m45s   <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mgr,rook_cluster<span class="token operator">=</span>rook-ceph
service/rook-ceph-mon-a           ClusterIP   <span class="token number">10.102</span>.39.160   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">6790</span>/TCP   12m     <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mon,ceph_daemon_id<span class="token operator">=</span>a,mon<span class="token operator">=</span>a,mon_cluster<span class="token operator">=</span>rook-ceph,rook_cluster<span class="token operator">=</span>rook-ceph
service/rook-ceph-mon-b           ClusterIP   <span class="token number">10.102</span>.49.137   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">6790</span>/TCP   11m     <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mon,ceph_daemon_id<span class="token operator">=</span>b,mon<span class="token operator">=</span>b,mon_cluster<span class="token operator">=</span>rook-ceph,rook_cluster<span class="token operator">=</span>rook-ceph
service/rook-ceph-mon-c           ClusterIP   <span class="token number">10.96</span>.25.143    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">6790</span>/TCP   10m     <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mon,ceph_daemon_id<span class="token operator">=</span>c,mon<span class="token operator">=</span>c,mon_cluster<span class="token operator">=</span>rook-ceph,rook_cluster<span class="token operator">=</span>rook-ceph

NAME                                    READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS        IMAGES             SELECTOR
deployment.extensions/rook-ceph-mgr-a   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           9m33s   mgr               ceph/ceph:v13      <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mgr,ceph_daemon_id<span class="token operator">=</span>a,instance<span class="token operator">=</span>a,mgr<span class="token operator">=</span>a,rook_cluster<span class="token operator">=</span>rook-ceph
deployment.extensions/rook-ceph-mon-a   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           12m     mon               ceph/ceph:v13      <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mon,ceph_daemon_id<span class="token operator">=</span>a,mon<span class="token operator">=</span>a,mon_cluster<span class="token operator">=</span>rook-ceph,rook_cluster<span class="token operator">=</span>rook-ceph
deployment.extensions/rook-ceph-mon-b   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           11m     mon               ceph/ceph:v13      <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mon,ceph_daemon_id<span class="token operator">=</span>b,mon<span class="token operator">=</span>b,mon_cluster<span class="token operator">=</span>rook-ceph,rook_cluster<span class="token operator">=</span>rook-ceph
deployment.extensions/rook-ceph-mon-c   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           10m     mon               ceph/ceph:v13      <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mon,ceph_daemon_id<span class="token operator">=</span>c,mon<span class="token operator">=</span>c,mon_cluster<span class="token operator">=</span>rook-ceph,rook_cluster<span class="token operator">=</span>rook-ceph
deployment.extensions/rook-ceph-osd-0   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           8m34s   osd               ceph/ceph:v13      <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-osd,ceph-osd-id<span class="token operator">=</span><span class="token number">0</span>,rook_cluster<span class="token operator">=</span>rook-ceph
deployment.extensions/rook-ceph-osd-1   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           8m33s   osd               ceph/ceph:v13      <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-osd,ceph-osd-id<span class="token operator">=</span><span class="token number">1</span>,rook_cluster<span class="token operator">=</span>rook-ceph
deployment.extensions/rook-ceph-osd-2   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           8m33s   osd               ceph/ceph:v13      <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-osd,ceph-osd-id<span class="token operator">=</span><span class="token number">2</span>,rook_cluster<span class="token operator">=</span>rook-ceph
deployment.extensions/rook-ceph-tools   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           12m     rook-ceph-tools   rook/ceph:master   <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-tools

NAME                                                             READY   STATUS      RESTARTS   AGE     IP               NODE                             NOMINATED NODE   READINESS GATES
pod/rook-ceph-mgr-a-669f5b47fc-sjvrr                             <span class="token number">1</span>/1     Running     <span class="token number">0</span>          9m33s   <span class="token number">10.244</span>.1.6       pruzicka-k8s-istio-workshop-node03   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-mon-a-784f8fb5b6-zcvjr                             <span class="token number">1</span>/1     Running     <span class="token number">0</span>          12m     <span class="token number">10.244</span>.0.5       pruzicka-k8s-istio-workshop-node01   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-mon-b-6dfbf486f4-2ktpm                             <span class="token number">1</span>/1     Running     <span class="token number">0</span>          11m     <span class="token number">10.244</span>.2.5       pruzicka-k8s-istio-workshop-node02   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-mon-c-6c85f6f44-j5wwv                              <span class="token number">1</span>/1     Running     <span class="token number">0</span>          10m     <span class="token number">10.244</span>.1.5       pruzicka-k8s-istio-workshop-node03   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-osd-0-6dd9cdc946-7th52                             <span class="token number">1</span>/1     Running     <span class="token number">0</span>          8m34s   <span class="token number">10.244</span>.1.8       pruzicka-k8s-istio-workshop-node03   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-osd-1-64cdd77897-9vdrh                             <span class="token number">1</span>/1     Running     <span class="token number">0</span>          8m33s   <span class="token number">10.244</span>.2.7       pruzicka-k8s-istio-workshop-node02   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-osd-2-67fcc446bd-skq52                             <span class="token number">1</span>/1     Running     <span class="token number">0</span>          8m33s   <span class="token number">10.244</span>.0.7       pruzicka-k8s-istio-workshop-node01   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node01-z29hj   <span class="token number">0</span>/2     Completed   <span class="token number">0</span>          8m39s   <span class="token number">10.244</span>.0.6       pruzicka-k8s-istio-workshop-node01   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node02-q8xqx   <span class="token number">0</span>/2     Completed   <span class="token number">0</span>          8m39s   <span class="token number">10.244</span>.2.6       pruzicka-k8s-istio-workshop-node02   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node03-vbwxv   <span class="token number">0</span>/2     Completed   <span class="token number">0</span>          8m39s   <span class="token number">10.244</span>.1.7       pruzicka-k8s-istio-workshop-node03   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
pod/rook-ceph-tools-76c7d559b6-s6s4l                             <span class="token number">1</span>/1     Running     <span class="token number">0</span>          12m     <span class="token number">192.168</span>.250.12   pruzicka-k8s-istio-workshop-node02   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre></div><p>Create a storage class based on the Ceph RBD volume plugin:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/storageclass.yaml
<span class="token function">sleep</span> <span class="token number">5</span>
</code></pre></div><p>Set <code>rook-ceph-block</code> as default Storage Class:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl patch storageclass rook-ceph-block <span class="token parameter variable">-p</span> <span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>metadata<span class="token entity" title="\&quot;">\&quot;</span>: {<span class="token entity" title="\&quot;">\&quot;</span>annotations<span class="token entity" title="\&quot;">\&quot;</span>:{<span class="token entity" title="\&quot;">\&quot;</span>storageclass.kubernetes.io/is-default-class<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>true<span class="token entity" title="\&quot;">\&quot;</span>}}}&quot;</span>
</code></pre></div><p>Check the Storage Classes:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl describe storageclass
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Name:                  rook-ceph-block
IsDefaultClass:        Yes
Annotations:           storageclass.kubernetes.io/is-default-class<span class="token operator">=</span>true
Provisioner:           ceph.rook.io/block
Parameters:            <span class="token assign-left variable">blockPool</span><span class="token operator">=</span>replicapool,clusterNamespace<span class="token operator">=</span>rook-ceph,fstype<span class="token operator">=</span>xfs
AllowVolumeExpansion:  <span class="token operator">&lt;</span>unset<span class="token operator">&gt;</span>
MountOptions:          <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
ReclaimPolicy:         Delete
VolumeBindingMode:     Immediate
Events:                <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre></div><p>See the CephBlockPool:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl describe cephblockpool <span class="token parameter variable">--namespace</span><span class="token operator">=</span>rook-ceph
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Name:         replicapool
Namespace:    rook-ceph
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
API Version:  ceph.rook.io/v1
Kind:         CephBlockPool
Metadata:
  Creation Timestamp:  <span class="token number">2019</span>-02-04T09:51:55Z
  Generation:          <span class="token number">1</span>
  Resource Version:    <span class="token number">3171</span>
  Self Link:           /apis/ceph.rook.io/v1/namespaces/rook-ceph/cephblockpools/replicapool
  <span class="token environment constant">UID</span><span class="token builtin class-name">:</span>                 8163367d-2862-11e9-a470-fa163e90237a
Spec:
  Replicated:
    Size:  <span class="token number">1</span>
Events:    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre></div><p>Check the status of your Ceph installation:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl <span class="token parameter variable">-n</span> rook-ceph <span class="token builtin class-name">exec</span> <span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> rook-ceph get pod <span class="token parameter variable">-l</span> <span class="token string">&quot;app=rook-ceph-tools&quot;</span> <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.items[0].metadata.name}&quot;</span><span class="token variable">)</span></span> -- ceph status
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>  cluster:
    id:     1f4458a6-f574-4e6c-8a25-5a5eef6eb0a7
    health: HEALTH_OK

  services:
    mon: <span class="token number">3</span> daemons, quorum c,a,b
    mgr: a<span class="token punctuation">(</span>active<span class="token punctuation">)</span>
    osd: <span class="token number">3</span> osds: <span class="token number">3</span> up, <span class="token number">3</span> <span class="token keyword">in</span>

  data:
    pools:   <span class="token number">1</span> pools, <span class="token number">100</span> pgs
    objects: <span class="token number">0</span>  objects, <span class="token number">0</span> B
    usage:   <span class="token number">13</span> GiB used, <span class="token number">44</span> GiB / <span class="token number">58</span> GiB avail
    pgs:     <span class="token number">100</span> active+clean
</code></pre></div><p>Ceph status:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl <span class="token parameter variable">-n</span> rook-ceph <span class="token builtin class-name">exec</span> <span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> rook-ceph get pod <span class="token parameter variable">-l</span> <span class="token string">&quot;app=rook-ceph-tools&quot;</span> <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.items[0].metadata.name}&quot;</span><span class="token variable">)</span></span> -- ceph osd status
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span>              <span class="token function">host</span>              <span class="token operator">|</span>  used <span class="token operator">|</span> avail <span class="token operator">|</span> wr ops <span class="token operator">|</span> wr data <span class="token operator">|</span> rd ops <span class="token operator">|</span> rd data <span class="token operator">|</span>   state   <span class="token operator">|</span>
+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+
<span class="token operator">|</span> <span class="token number">0</span>  <span class="token operator">|</span> pruzicka-k8s-istio-workshop-node03 <span class="token operator">|</span> 4302M <span class="token operator">|</span> <span class="token number">15</span>.0G <span class="token operator">|</span>    <span class="token number">0</span>   <span class="token operator">|</span>     <span class="token number">0</span>   <span class="token operator">|</span>    <span class="token number">0</span>   <span class="token operator">|</span>     <span class="token number">0</span>   <span class="token operator">|</span> exists,up <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1</span>  <span class="token operator">|</span> pruzicka-k8s-istio-workshop-node02 <span class="token operator">|</span> 4455M <span class="token operator">|</span> <span class="token number">14</span>.8G <span class="token operator">|</span>    <span class="token number">0</span>   <span class="token operator">|</span>     <span class="token number">0</span>   <span class="token operator">|</span>    <span class="token number">0</span>   <span class="token operator">|</span>     <span class="token number">0</span>   <span class="token operator">|</span> exists,up <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2</span>  <span class="token operator">|</span> pruzicka-k8s-istio-workshop-node01 <span class="token operator">|</span> 4948M <span class="token operator">|</span> <span class="token number">14</span>.3G <span class="token operator">|</span>    <span class="token number">0</span>   <span class="token operator">|</span>     <span class="token number">0</span>   <span class="token operator">|</span>    <span class="token number">0</span>   <span class="token operator">|</span>     <span class="token number">0</span>   <span class="token operator">|</span> exists,up <span class="token operator">|</span>
+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+
</code></pre></div><p>Check the cluster usage status:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl <span class="token parameter variable">-n</span> rook-ceph <span class="token builtin class-name">exec</span> <span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> rook-ceph get pod <span class="token parameter variable">-l</span> <span class="token string">&quot;app=rook-ceph-tools&quot;</span> <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.items[0].metadata.name}&quot;</span><span class="token variable">)</span></span> -- ceph <span class="token function">df</span>
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>GLOBAL:
    SIZE       AVAIL      RAW USED     %RAW USED
    <span class="token number">58</span> GiB     <span class="token number">44</span> GiB       <span class="token number">13</span> GiB         <span class="token number">23.22</span>
POOLS:
    NAME            ID     USED     %USED     MAX AVAIL     OBJECTS
    replicapool     <span class="token number">1</span>       <span class="token number">0</span> B         <span class="token number">0</span>        <span class="token number">40</span> GiB           <span class="token number">0</span>
</code></pre></div><p>Change listening port of <a href="https://docs.ceph.com/en/latest/mgr/dashboard/" target="_blank" rel="noopener noreferrer">Ceph Dashboard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
(<a href="https://github.com/rook/rook/issues/2526" target="_blank" rel="noopener noreferrer">https://github.com/rook/rook/issues/2526<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl <span class="token parameter variable">-n</span> rook-ceph <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> <span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> rook-ceph get pod <span class="token parameter variable">-l</span> <span class="token string">&quot;app=rook-ceph-tools&quot;</span> <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.items[0].metadata.name}'</span><span class="token variable">)</span></span> -- ceph config <span class="token builtin class-name">set</span> mgr mgr/dashboard/server_addr <span class="token number">0.0</span>.0.0
<span class="token function">sleep</span> <span class="token number">5</span>
kubectl delete pod <span class="token parameter variable">-n</span> rook-ceph  <span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> rook-ceph get pod <span class="token parameter variable">-l</span> <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mgr <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.items[0].metadata.name}&quot;</span><span class="token variable">)</span></span>
<span class="token function">sleep</span> <span class="token number">5</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Run the following command on your local environment to allow your browser reach
the pods ports.</p></div> <p>Configure port forwarding to Ceph Dashboard:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl <span class="token parameter variable">-n</span> rook-ceph port-forward <span class="token variable"><span class="token variable">$(</span>kubectl <span class="token parameter variable">-n</span> rook-ceph get pod <span class="token parameter variable">-l</span> <span class="token assign-left variable">app</span><span class="token operator">=</span>rook-ceph-mgr <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.items[0].metadata.name}&quot;</span><span class="token variable">)</span></span> <span class="token number">8443</span>:8443 <span class="token operator">&amp;</span>
</code></pre></div><p>To access the Ceph Dashboard <a href="https://localhost:8443" target="_blank" rel="noopener noreferrer">https://localhost:8443<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
use username <code>admin</code> and password can be found by running:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl <span class="token parameter variable">-n</span> rook-ceph get secret rook-ceph-dashboard-password <span class="token parameter variable">-o</span> yaml <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;password:&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&quot;{print \<span class="token variable">$2</span>}&quot;</span> <span class="token operator">|</span> base64 <span class="token parameter variable">--decode</span>
</code></pre></div><p>Ceph Dashboard (<a href="https://localhost:8443" target="_blank" rel="noopener noreferrer">https://localhost:8443<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <p><img src="/k8s-istio-workshop/assets/img/ceph_dashboard.d29f4d99.png" alt="Ceph Dashboard" title="Ceph Dashboard"></p> <p><img src="https://raw.githubusercontent.com/rook/artwork/05c1bd90005958e14bbba14f983c884b1d474879/logo/Rook_Logo(Color).svg?sanitize=true" alt="Rook" title="Rook"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ruzickap/k8s-istio-workshop/edit/master/docs/lab-04/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/30/2024, 2:35:56 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/k8s-istio-workshop/lab-03/" class="prev">
        Install Helm
      </a></span> <span class="next"><a href="/k8s-istio-workshop/lab-05/">
        Install ElasticSearch and Kibana
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/k8s-istio-workshop/assets/js/app.aadafe26.js" defer></script><script src="/k8s-istio-workshop/assets/js/2.a8265927.js" defer></script><script src="/k8s-istio-workshop/assets/js/1.3a70545e.js" defer></script><script src="/k8s-istio-workshop/assets/js/30.0eb57089.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{316:function(s,a,e){s.exports=e.p+"assets/img/ceph_dashboard.d29f4d99.png"},339:function(s,a,e){"use strict";e.r(a);var t=e(8),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"install-rook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-rook"}},[s._v("#")]),s._v(" Install Rook")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("Screencast: "),a("a",{attrs:{href:"https://asciinema.org/a/229605?autoplay=0&t=155",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://asciinema.org/a/229605?t=155"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("Install "),a("a",{attrs:{href:"https://rook.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Rook"),a("OutboundLink")],1),s._v(" Operator\n("),a("a",{attrs:{href:"https://ceph.io/en/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ceph"),a("OutboundLink")],1),s._v(" storage for k8s):")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("helm repo "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" rook-stable https://charts.rook.io/stable\nhelm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--wait")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" rook-ceph "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),s._v(" rook-ceph-system rook-stable/rook-ceph\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n")])])]),a("p",[s._v("See how the "),a("code",[s._v("rook-ceph-system")]),s._v(" should look like:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl get svc,deploy,po "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-system "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS           IMAGES             SELECTOR\ndeployment.extensions/rook-ceph-operator   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           3m36s   rook-ceph-operator   rook/ceph:v0.9.2   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-operator\n\nNAME                                      READY   STATUS    RESTARTS   AGE     IP               NODE                             NOMINATED NODE   READINESS GATES\npod/rook-ceph-agent-2bxhq                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m14s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.12   pruzicka-k8s-istio-workshop-node02   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-agent-8h4p4                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m14s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.11   pruzicka-k8s-istio-workshop-node01   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-agent-mq69r                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m14s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.13   pruzicka-k8s-istio-workshop-node03   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-operator-7478c899b5-px2hc   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3m37s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".2.3       pruzicka-k8s-istio-workshop-node02   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-discover-8ffj8                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m14s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".2.4       pruzicka-k8s-istio-workshop-node02   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-discover-l56jj                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m14s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".1.2       pruzicka-k8s-istio-workshop-node03   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-discover-q9xwp                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m14s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.4       pruzicka-k8s-istio-workshop-node01   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("Create your Rook cluster:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/cluster.yaml\n")])])]),a("p",[s._v("Get the "),a("a",{attrs:{href:"https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/toolbox.yaml",target:"_blank",rel:"noopener noreferrer"}},[s._v("Toolbox"),a("OutboundLink")],1),s._v("\nwith Ceph commands:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/toolbox.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("240")]),s._v("\n")])])]),a("p",[s._v("Check what was created in "),a("code",[s._v("rook-ceph")]),s._v(" namespace:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl get svc,deploy,po "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("NAME                              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    AGE     SELECTOR\nservice/rook-ceph-mgr             ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.103")]),s._v(".36.128   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9283")]),s._v("/TCP   8m45s   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mgr-dashboard   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.99")]),s._v(".173.58    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v("/TCP   8m45s   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mon-a           ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.102")]),s._v(".39.160   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6790")]),s._v("/TCP   12m     "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mon-b           ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.102")]),s._v(".49.137   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6790")]),s._v("/TCP   11m     "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\nservice/rook-ceph-mon-c           ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.96")]),s._v(".25.143    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6790")]),s._v("/TCP   10m     "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\n\nNAME                                    READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS        IMAGES             SELECTOR\ndeployment.extensions/rook-ceph-mgr-a   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           9m33s   mgr               ceph/ceph:v13      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr,ceph_daemon_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,instance"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mgr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-mon-a   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           12m     mon               ceph/ceph:v13      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a,mon_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-mon-b   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           11m     mon               ceph/ceph:v13      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,mon_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-mon-c   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           10m     mon               ceph/ceph:v13      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mon,ceph_daemon_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,mon_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-osd-0   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           8m34s   osd               ceph/ceph:v13      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-osd,ceph-osd-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-osd-1   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           8m33s   osd               ceph/ceph:v13      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-osd,ceph-osd-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-osd-2   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           8m33s   osd               ceph/ceph:v13      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-osd,ceph-osd-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(",rook_cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\ndeployment.extensions/rook-ceph-tools   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           12m     rook-ceph-tools   rook/ceph:master   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-tools\n\nNAME                                                             READY   STATUS      RESTARTS   AGE     IP               NODE                             NOMINATED NODE   READINESS GATES\npod/rook-ceph-mgr-a-669f5b47fc-sjvrr                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          9m33s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".1.6       pruzicka-k8s-istio-workshop-node03   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-mon-a-784f8fb5b6-zcvjr                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          12m     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.5       pruzicka-k8s-istio-workshop-node01   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-mon-b-6dfbf486f4-2ktpm                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          11m     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".2.5       pruzicka-k8s-istio-workshop-node02   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-mon-c-6c85f6f44-j5wwv                              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          10m     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".1.5       pruzicka-k8s-istio-workshop-node03   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-0-6dd9cdc946-7th52                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m34s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".1.8       pruzicka-k8s-istio-workshop-node03   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-1-64cdd77897-9vdrh                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m33s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".2.7       pruzicka-k8s-istio-workshop-node02   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-2-67fcc446bd-skq52                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m33s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.7       pruzicka-k8s-istio-workshop-node01   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node01-z29hj   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/2     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m39s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.6       pruzicka-k8s-istio-workshop-node01   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node02-q8xqx   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/2     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m39s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".2.6       pruzicka-k8s-istio-workshop-node02   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-osd-prepare-pruzicka-k8s-istio-workshop-node03-vbwxv   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/2     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m39s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".1.7       pruzicka-k8s-istio-workshop-node03   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\npod/rook-ceph-tools-76c7d559b6-s6s4l                             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          12m     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.12   pruzicka-k8s-istio-workshop-node02   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("Create a storage class based on the Ceph RBD volume plugin:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" https://raw.githubusercontent.com/rook/rook/v0.9.3/cluster/examples/kubernetes/ceph/storageclass.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])])]),a("p",[s._v("Set "),a("code",[s._v("rook-ceph-block")]),s._v(" as default Storage Class:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl patch storageclass rook-ceph-block "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{'),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("metadata"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(": {"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("annotations"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(":{"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("storageclass.kubernetes.io/is-default-class"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("true"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v('}}}"')]),s._v("\n")])])]),a("p",[s._v("Check the Storage Classes:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl describe storageclass\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Name:                  rook-ceph-block\nIsDefaultClass:        Yes\nAnnotations:           storageclass.kubernetes.io/is-default-class"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\nProvisioner:           ceph.rook.io/block\nParameters:            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("blockPool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("replicapool,clusterNamespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph,fstype"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xfs\nAllowVolumeExpansion:  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nMountOptions:          "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nReclaimPolicy:         Delete\nVolumeBindingMode:     Immediate\nEvents:                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("See the CephBlockPool:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl describe cephblockpool "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Name:         replicapool\nNamespace:    rook-ceph\nLabels:       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nAnnotations:  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nAPI Version:  ceph.rook.io/v1\nKind:         CephBlockPool\nMetadata:\n  Creation Timestamp:  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-02-04T09:51:55Z\n  Generation:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  Resource Version:    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3171")]),s._v("\n  Self Link:           /apis/ceph.rook.io/v1/namespaces/rook-ceph/cephblockpools/replicapool\n  "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("                 8163367d-2862-11e9-a470-fa163e90237a\nSpec:\n  Replicated:\n    Size:  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nEvents:    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("Check the status of your Ceph installation:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph status\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("  cluster:\n    id:     1f4458a6-f574-4e6c-8a25-5a5eef6eb0a7\n    health: HEALTH_OK\n\n  services:\n    mon: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" daemons, quorum c,a,b\n    mgr: a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("active"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    osd: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" osds: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" up, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n\n  data:\n    pools:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" pools, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" pgs\n    objects: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  objects, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" B\n    usage:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" GiB used, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" GiB / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58")]),s._v(" GiB avail\n    pgs:     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" active+clean\n")])])]),a("p",[s._v("Ceph status:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph osd status\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  used "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" avail "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" wr ops "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" wr data "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rd ops "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rd data "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   state   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" pruzicka-k8s-istio-workshop-node03 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 4302M "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(".0G "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" exists,up "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" pruzicka-k8s-istio-workshop-node02 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 4455M "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(".8G "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" exists,up "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" pruzicka-k8s-istio-workshop-node01 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 4948M "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(".3G "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" exists,up "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+----+--------------------------------+-------+-------+--------+---------+--------+---------+-----------+\n")])])]),a("p",[s._v("Check the cluster usage status:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v("\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("GLOBAL:\n    SIZE       AVAIL      RAW USED     %RAW USED\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58")]),s._v(" GiB     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" GiB       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" GiB         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23.22")]),s._v("\nPOOLS:\n    NAME            ID     USED     %USED     MAX AVAIL     OBJECTS\n    replicapool     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" B         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(" GiB           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),a("p",[s._v("Change listening port of "),a("a",{attrs:{href:"https://docs.ceph.com/en/latest/mgr/dashboard/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ceph Dashboard"),a("OutboundLink")],1),s._v("\n("),a("a",{attrs:{href:"https://github.com/rook/rook/issues/2526",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/rook/rook/issues/2526"),a("OutboundLink")],1),s._v("):")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app=rook-ceph-tools"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{.items[0].metadata.name}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -- ceph config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" mgr mgr/dashboard/server_addr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nkubectl delete pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("Run the following command on your local environment to allow your browser reach\nthe pods ports.")])]),s._v(" "),a("p",[s._v("Configure port forwarding to Ceph Dashboard:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph port-forward "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rook-ceph-mgr "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.items[0].metadata.name}"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v(":8443 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("p",[s._v("To access the Ceph Dashboard "),a("a",{attrs:{href:"https://localhost:8443",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://localhost:8443"),a("OutboundLink")],1),s._v("\nuse username "),a("code",[s._v("admin")]),s._v(" and password can be found by running:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" rook-ceph get secret rook-ceph-dashboard-password "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" yaml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password:"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{print \\'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v('}"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" base64 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--decode")]),s._v("\n")])])]),a("p",[s._v("Ceph Dashboard ("),a("a",{attrs:{href:"https://localhost:8443",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://localhost:8443"),a("OutboundLink")],1),s._v("):")]),s._v(" "),a("p",[a("img",{attrs:{src:e(316),alt:"Ceph Dashboard",title:"Ceph Dashboard"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/rook/artwork/05c1bd90005958e14bbba14f983c884b1d474879/logo/Rook_Logo(Color).svg?sanitize=true",alt:"Rook",title:"Rook"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);